Files_Requiring_Updates:
  - path: ./system/contracts/protocols.md
    reason: Update XML schema to support changes in Director-Evaluator pattern
    spec_of_changes:
      - Add EvaluationResult type definition
      - Add output_slot and input_source elements to task schema
      - Update context_management section defaults
      - Add script execution error handling specifics
    dependencies:
      - Contract:Tasks:TemplateSchema:1.0
      - Pattern:DirectorEvaluator:1.1

  - path: ./components/task-system/spec/types.md
    reason: Add new types for evaluation results and environment management
    spec_of_changes:
      - Add EvaluationResult interface
      - Update DirectorEnv interface
      - Add prepareContinuationEnv function type
      - Add storeEvaluatorResult function type
    dependencies:
      - Interface:TaskSystem:1.0
      - TaskResult type
      - Environment type

  - path: ./components/evaluator/README.md
    reason: Update evaluator behavior documentation for new pattern
    spec_of_changes:
      - Document single output variable handling
      - Update context management section
      - Add script execution and feedback flow
      - Update environment handling documentation
    dependencies:
      - Pattern:DirectorEvaluator:1.1
      - Pattern:ContextFrame:1.0

  - path: ./components/task-system/impl/design.md
    reason: Update implementation design for Director-Evaluator changes
    spec_of_changes:
      - Add design for output slot management
      - Document environment preparation
      - Update context clearing rules
      - Add script execution handling
    dependencies:
      - Component:Evaluator:1.0
      - Pattern:ResourceManagement:1.0

  - path: ./system/architecture/patterns/director-evaluator.md
    reason: Update pattern documentation with new simplified flow
    spec_of_changes:
      - Update flow description for latest-only retention
      - Document environment variable management
      - Add script execution pattern
      - Update XML examples
    dependencies:
      - Pattern:ContextFrame:1.0
      - Pattern:ResourceManagement:1.0

Architectural_Impact_Assessment:
  memory_usage: Significant reduction in memory usage (60-80%) by retaining only latest evaluator output
  error_handling: Simplified error recovery due to single point of validation
  context_management: Clearer boundaries between task executions due to minimal context carryover
  resource_tracking: Improved resource usage predictability with reduced context accumulation
  component_coupling: Reduced coupling between Director and Evaluator through standardized interface
  backwards_compatibility: Changes maintain compatibility through XML schema extensions

Questions_For_Clarification:
  - Should the EvaluationResult include any metadata beyond success and feedback fields?
  - How should the system handle partial script execution results when exitCode is non-zero?
  - Is environment clearing atomic or should there be a grace period for cleanup?
  - Should there be a maximum size limit for the last_evaluator_output value?
  - Do we need to version the EvaluationResult type for future extensions?
  - How should the system handle cases where the evaluator fails to process script output?